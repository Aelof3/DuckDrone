!function(e){function t(t){for(var r,i,s=t[0],d=t[1],l=t[2],h=0,u=[];h<s.length;h++)i=s[h],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);for(c&&c(t);u.length;)u.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var d=n[s];0!==o[d]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=d;a.push([124,1]),n()}({124:function(e,t,n){n(125),e.exports=n(312)},311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);n(311);var r=n(0),o=n(122),a=n(123);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cameraPersp=null,this.cameraOrtho=null,this.currentCamera=null,this.scene=null,this.renderer=null,this.control=null,this.orbit=null,this.raycaster=null,this.mouse=new r.G,this.INTERSECTED=null,this.info=document.getElementById("info"),this.platforms=[]}var t,n,s;return t=e,(n=[{key:"init",value:function(){this.renderer=new r.I({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.aspect=window.innerWidth/window.innerHeight,this.cameraPersp=new r.x(50,this.aspect,.01,3e4),this.cameraOrtho=new r.w(-600*this.aspect,600*this.aspect,600,-600,.01,3e4),this.currentCamera=this.cameraPersp,this.currentCamera.position.set(1e3,500,1e3),this.currentCamera.lookAt(0,200,0),this.scene=new r.B,this.scene.add(new r.k(1e4,100));var e=new r.e(16777215,2);e.position.set(1,1,1),this.scene.add(e),this.orbit=new o.a(this.currentCamera,this.renderer.domElement),this.orbit.update(),this.control=new a.a(this.currentCamera,this.renderer.domElement),this.scene.add(this.control),this.setupGround(),this.setupEndPlatform(),this.raycaster=new r.A,this.setupEventHandlers(),this.guiSetup(),this.render()}},{key:"setupGround",value:function(){var e=new r.a(500,.25,250),t=new r.t({color:11184810,transparent:!0,flatShading:!0}),n=new r.g(e),o=new r.m({color:11141290,linewidth:20}),a=new r.n(n,o);this.ground=new r.r(e,t),this.ground.add(a),this.ground.position.set(0,0,0),this.scene.add(this.ground),this.control.attach(this.ground)}},{key:"addPlatform",value:function(e){var t=e||{d:{x:r.p.randInt(10,200),y:r.p.randInt(10,200),z:r.p.randInt(10,200)},p:{x:0,y:0,z:300},q:{x:0,y:0,z:0,w:1}},n=t.d.x,o=t.d.y,a=t.d.z,i=t.p.x,s=t.p.y,d=t.p.z,l=t.q.x,c=t.q.y,h=t.q.z,u=t.q.w,p=new r.a(n,o,a),m=new r.t({color:11184810,transparent:!0,flatShading:!0}),f=new r.g(p),g=new r.m({color:11141290,linewidth:10}),y=new r.n(f,g),w=new r.r(p,m);w.add(y),this.platforms.push(w),this.scene.add(w),w.position.set(i,s,d),w.quaternion.set(l,c,h,u)}},{key:"setupEndPlatform",value:function(){var e=new r.a(40,40,40),t=new r.t({color:65280,transparent:!0,flatShading:!0}),n=new r.g(e),o=new r.m({color:11141290,linewidth:10}),a=new r.n(n,o);this.endPlatform=new r.r(e,t),this.endPlatform.add(a),this.endPlatform.position.set(0,21,0),this.scene.add(this.endPlatform)}},{key:"setupEventHandlers",value:function(){var e=this;this.orbit.addEventListener("change",this.render),this.control.addEventListener("change",this.render),this.control.addEventListener("dragging-changed",(function(t){e.orbit.enabled=!t.value})),window.addEventListener("resize",(function(t){e.onWindowResize(t)}),!1),window.addEventListener("keydown",(function(t){switch(t.key.toLowerCase()){case"q":e.control.setSpace("local"===e.control.space?"world":"local");break;case"shift":e.control.setTranslationSnap(100),e.control.setRotationSnap(r.p.degToRad(15)),e.control.setScaleSnap(.25);break;case"w":e.control.setMode("translate");break;case"delete":e.deleteObject();break;case"e":e.control.setMode("rotate");break;case"p":e.addPlatform();break;case"r":e.control.setMode("scale");break;case"c":var n=e.currentCamera.position.clone();e.currentCamera=e.currentCamera.isPerspectiveCamera?e.cameraOrtho:e.cameraPersp,e.currentCamera.position.copy(n),e.orbit.object=e.currentCamera,e.control.camera=e.currentCamera,e.currentCamera.lookAt(e.orbit.target.x,e.orbit.target.y,e.orbit.target.z),e.onWindowResize();break;case"v":var o=Math.random()+.1,a=Math.random()+.1;e.cameraPersp.fov=160*o,e.cameraOrtho.bottom=500*-o,e.cameraOrtho.top=500*o,e.cameraPersp.zoom=5*a,e.cameraOrtho.zoom=5*a,e.onWindowResize();break;case"+":case"=":e.control.setSize(e.control.size+.1);break;case"-":case"_":e.control.setSize(Math.max(e.control.size-.1,.1));break;case"x":e.control.showX=!e.control.showX;break;case"y":e.control.showY=!e.control.showY;break;case"z":e.control.showZ=!e.control.showZ;break;case" ":e.control.enabled=!e.control.enabled;break;case"!":e.generateFileContents();break;case"@":e.setupLoadData()}})),this.renderer.domElement.addEventListener("mousemove",(function(t){e.onDocumentMouseMove(t)}),!1),this.renderer.domElement.addEventListener("click",(function(t){e.onMouseClick(t)}),!1),this.renderer.domElement.addEventListener("keyup",(function(t){switch(t.keyCode){case 16:e.control.setTranslationSnap(null),e.control.setRotationSnap(null),e.control.setScaleSnap(null)}}))}},{key:"deleteObject",value:function(){var e=this.control.object;e.uuid!==this.ground.uuid&&e.uuid!==this.endPlatform.uuid&&(this.control.detach(),e.geometry.dispose(),e.material.dispose(),this.scene.remove(e),this.platforms=this.platforms.filter((function(t){return t.uuid!==e.uuid})))}},{key:"onWindowResize",value:function(){this.aspect=window.innerWidth/window.innerHeight,this.cameraPersp.aspect=this.aspect,this.cameraPersp.updateProjectionMatrix(),this.cameraOrtho.left=this.cameraOrtho.bottom*this.aspect,this.cameraOrtho.right=this.cameraOrtho.top*this.aspect,this.cameraOrtho.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.render()}},{key:"onDocumentMouseMove",value:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}},{key:"onMouseClick",value:function(e){this.INTERSECTED&&"mesh"===this.INTERSECTED.type.toLowerCase()&&this.control.attach(this.INTERSECTED)}},{key:"guiSetup",value:function(){this.keybinds=this.h2e('<div>"W" translate | "E" rotate | "R" scale | "+/-" adjust size | "Q" toggle world/local space |  "Shift" snap to grid<br>\n                                        "X" toggle X | "Y" toggle Y | "Z" toggle Z | "Spacebar" toggle enabled | "C" toggle camera | "V" random zoom<br><br>\n                                        "P" add platform | "DELETE" delete selected platform<br>\n                                        "!" download code | "@" load level\n                                    </div>'),this.info.appendChild(this.keybinds)}},{key:"render",value:function(){var e=this;if(this.renderer){if(requestAnimationFrame((function(){e.render()})),this.raycaster){this.raycaster.setFromCamera(this.mouse,this.currentCamera);var t=this.raycaster.intersectObjects(this.scene.children);t.length>0?this.INTERSECTED!=t[0].object&&(this.INTERSECTED=t[0].object):this.INTERSECTED=null}this.renderer.render(this.scene,this.currentCamera)}}},{key:"generateFileContents",value:function(){for(var e=this.platforms.map((function(e){return{d:{x:e.geometry.parameters.width,y:e.geometry.parameters.height,z:e.geometry.parameters.depth},p:{x:e.position.x,y:e.position.y,z:e.position.z},q:{x:e.quaternion.x,y:e.quaternion.y,z:e.quaternion.z,w:e.quaternion.w}}})),t=btoa(JSON.stringify({ground:{p:{x:this.ground.position.x,y:this.ground.position.y,z:this.ground.position.z},q:{x:this.ground.quaternion.x,y:this.ground.quaternion.y,z:this.ground.quaternion.z,w:this.ground.quaternion.w},d:this.ground.geometry.parameters},endPlatform:{p:{x:this.endPlatform.position.x,y:this.endPlatform.position.y,z:this.endPlatform.position.z},q:{x:this.endPlatform.quaternion.x,y:this.endPlatform.quaternion.y,z:this.endPlatform.quaternion.z,w:this.endPlatform.quaternion.w},d:this.endPlatform.geometry.parameters},platforms:e})),n="",r=0;r<this.platforms.length;r++)n+="{\n                            pos: {x:".concat(this.platforms[r].position.x,",y:").concat(this.platforms[r].position.y,",z:").concat(this.platforms[r].position.z,"},\n                            quat: {x:").concat(this.platforms[r].quaternion.x,",y:").concat(this.platforms[r].quaternion.y,",z:").concat(this.platforms[r].quaternion.z,",w:").concat(this.platforms[r].quaternion.w,"},\n                            dimensions: {x:").concat(this.platforms[r].geometry.parameters.width,",y:").concat(this.platforms[r].geometry.parameters.height,",z:").concat(this.platforms[r].geometry.parameters.depth,"},\n                            color: 'hsl(60,100%,50%)',\n                            isEndOfLevel: false\n                        },");var o="import DuckDroneLevel from '../DuckDroneLevel.js';\n\nexport default class DuckDroneLevelNUMBER extends DuckDroneLevel{\n    constructor( data ){\n        super( data );\n\n        // add to levels folder --- ./src/classes/levels/DuckDroneLevelNUMBER.js\n\n        this.color = 'hsl(30,100%,50%)';\n\n        this.pos = {x:500,y:0,z:0}; // CHANGE ME\n\n        this.groundsettings = {\n            bodyGeometry:{x:".concat(this.ground.geometry.parameters.width,", y:").concat(this.ground.geometry.parameters.height,", z:").concat(this.ground.geometry.parameters.depth,"},\n            color: 0xfc2a51\n        }\n\n        this.platforms = [\n            ").concat(n,"\n            {\n                pos: {x:").concat(this.endPlatform.position.x,",y:").concat(this.endPlatform.position.y,",z:").concat(this.endPlatform.position.z,"},\n                dimensions: {x:").concat(this.endPlatform.geometry.parameters.width,", y:").concat(this.endPlatform.geometry.parameters.height,", z:").concat(this.endPlatform.geometry.parameters.depth,"},\n                color: 'hsl(60,100%,50%)',\n                isEndOfLevel: true\n            },\n        ];\n        this.init( );\n    }\n    // add onCreate to run code right after the level is created. Good for starting moving pieces\n    // add onEnd to run code after the level is beaten. Good for removing barriers or walls you had preventing improper access to the level end\n    // add alsoLoop to include code in the render loop\n    // editor save string - ").concat(t,"\n}");this.download("DuckDroneLevelNUMBER.js",o)}},{key:"loadData",value:function(e){var t=this.parseLoadData(e);console.log(t),this.ground.geometry.parameters.width=t.ground.d.width,this.ground.geometry.parameters.height=t.ground.d.height,this.ground.geometry.parameters.depth=t.ground.d.depth,this.ground.position.copy(new r.H(t.ground.p.x,t.ground.p.y,t.ground.p.z)),this.ground.quaternion.copy(new r.z(t.ground.q.x,t.ground.q.y,t.ground.q.z,t.ground.q.w)),this.endPlatform.geometry.parameters.width=t.endPlatform.d.width,this.endPlatform.geometry.parameters.height=t.endPlatform.d.height,this.endPlatform.geometry.parameters.depth=t.endPlatform.d.depth,this.endPlatform.position.copy(new r.H(t.endPlatform.p.x,t.endPlatform.p.y,t.endPlatform.p.z)),this.endPlatform.quaternion.copy(new r.z(t.endPlatform.q.x,t.endPlatform.q.y,t.endPlatform.q.z,t.endPlatform.q.w)),this.control.detach();for(var n=0;n<this.platforms.length;n++)this.platforms[n].geometry.dispose(),this.platforms[n].material.dispose(),this.scene.remove(this.platforms[n]);this.platforms=[];for(var o=0;o<t.platforms.length;o++)this.addPlatform(t.platforms[o])}},{key:"setupLoadData",value:function(){var e=prompt("Enter your load string, found at the bottom of your saved level file");this.loadData(e)}},{key:"parseLoadData",value:function(e){return JSON.parse(atob(e))}},{key:"download",value:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"h2e",value:function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}}])&&i(t.prototype,n),s&&i(t,s),e}())).init()}});